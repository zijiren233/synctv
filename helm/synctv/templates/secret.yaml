apiVersion: v1
kind: Secret
metadata:
  name: {{ include "synctv.secretName" . }}
  labels:
    {{- include "synctv.labels" . | nindent 4 }}
type: Opaque
stringData:
  # Database Credentials
  DATABASE_USERNAME: {{ .Values.secrets.database.username | quote }}
  DATABASE_PASSWORD: {{ .Values.secrets.database.password | quote }}

  # Redis Password
  REDIS_PASSWORD: {{ .Values.secrets.redis.password | quote }}

  # JWT Secret
  JWT_SECRET: {{ .Values.secrets.jwt.secret | quote }}

  # Email SMTP Credentials
  {{- if .Values.config.email.enabled }}
  EMAIL_USERNAME: {{ .Values.secrets.email.username | quote }}
  EMAIL_PASSWORD: {{ .Values.secrets.email.password | quote }}
  {{- end }}

  # Cluster gRPC Auth Secret
  CLUSTER_GRPC_SECRET: {{ .Values.secrets.cluster.grpcSecret | quote }}

  # Provider Service Auth Secret
  PROVIDER_AUTH_SECRET: {{ .Values.secrets.provider.authSecret | quote }}

  # OAuth2 Client Secrets
  {{- range $provider, $config := .Values.secrets.oauth2 }}
  OAUTH2_{{ upper $provider }}_CLIENT_SECRET: {{ $config.clientSecret | quote }}
  {{- end }}
